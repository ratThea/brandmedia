(()=>{"use strict";class t{constructor({root:t,startActive:s=0,equalify:e=!0}){t&&(this._setupBase(t,s,e),this._setupHandler())}_name="thea-tabs";_baseClasses={root:this._name,header:`${this._name}__header`,body:`${this._name}__body`,button:`${this._name}__button`,content:`${this._name}__content`};_setupBase(t,s,e){this._root=t,this._buttons=Array.from(this._root.children[0].children),this._contents=Array.from(this._root.children[1].children),this._configure(s,e),this._root.classList.add(this._baseClasses.root),this._root.children[0].classList.add(this._baseClasses.header),this._root.children[1].classList.add(this._baseClasses.body),this._buttons.length===this._contents.length&&this._buttons.forEach(((t,s)=>{t.classList.add(this._baseClasses.button),t.dataset.point=`${s}`,this._contents[s].classList.add(this._baseClasses.content)})),this._buttons[this._config.params.activeTab].classList.add("active"),this._contents[this._config.params.activeTab].classList.add("active"),this._config.params.equalify&&this._equalifyHeights()}_configure(t,s){this._config={},s&&(this._config.tabContent={maxHeight:Math.max(...this._contents.map((t=>t.offsetHeight)))}),this._config.params={equalify:s,activeTab:t}}_setupHandler(){this._root.addEventListener("click",(t=>{const s=t.target.closest("[data-point]");if(s){const t=+s.dataset.point;t!==this._config.params.activeTab&&this._toggleActive(t)}}))}_toggleActive(t){this._buttons[this._config.params.activeTab].classList.remove("active"),this._contents[this._config.params.activeTab].classList.remove("active"),this._buttons[t].classList.add("active"),this._contents[t].classList.add("active"),this._config.params.activeTab=t}_equalifyHeights(){this._contents.forEach((t=>t.style.height=`${this._config.tabContent.maxHeight}px`))}}class s{constructor({root:t,controls:s,startActive:e=0,speed:i=1,infinite:o=!0,autoplay:n=!0,draggable:a=!0}){t&&t.children.length&&s&&(this._setupBase(t,s,e,i,o,n,a),this._setupControls(),this._setupHandlers(),n&&this._autoplay())}_prefixClass="thea-slider";_baseClasses={root:this._prefixClass,container:`${this._prefixClass}__container`,slide:`${this._prefixClass}__slide`,controls:{dots:{container:`${this._prefixClass}__dots`,dot:`${this._prefixClass}__dot`}}};_configure(t,s,e,i,o,n){this._config={};const a=this._root.offsetWidth,c=this._root.offsetHeight,d=this._slides.items.length,l=1e3*e;this._config.slide={width:a,height:c,count:d,lastIndex:d-1,activeIndex:s},this._config.offset={left:-a*(i?s+1:s),width:a,min:-a*(i?s+1:s),max:-a*d,speed:l},this._config.settings={state:{status:o?"active":"paused",cooldown:!o},autoplay:{isSet:o,timerId:null},infinite:i,transition:`left ${e}s ease`,draggable:{isSet:n,startDragPosition:0,dragRequiredOffset:25}},this._config.controls={buttons:{isSet:"buttons"in t},dots:{isSet:"dots"in t}},this._config.controls.buttons.isSet&&(this._config.controls.buttons.prev=t.buttons.prev,this._config.controls.buttons.next=t.buttons.next,this._config.controls.buttons.toggle=t.buttons.toggle),this._config.controls.dots.isSet&&(this._config.controls.dots.container=t.dots.container,this._config.controls.dots.dotClass=t.dots.dotClass)}_setupBase(t,s,e,i,o,n,a){this._root=t,this._slides={items:Array.from(this._root.children)},this._configure(s,e,i,o,n,a),o&&(this._slides.before=this._slides.items[this._slides.items.length-1].cloneNode(!0),this._slides.after=this._slides.items[0].cloneNode(!0)),this._container=document.createElement("div"),this._root.append(this._container),o?this._container.append(this._slides.before,...this._slides.items,this._slides.after):this._container.append(...this._slides.items),this._setupBaseStyles(),this._container.style.left=`${this._config.offset.left}px`,this._slides.items[this._config.slide.activeIndex].classList.add("active")}_setupBaseStyles(){if(this._root.classList.add(this._baseClasses.root),this._container.classList.add(this._baseClasses.container),this._container.style.transition=this._config.settings.transition,this._slides.items.forEach((t=>{t.classList.add(this._baseClasses.slide),t.style.width=`${this._config.slide.width}px`,t.style.height=`${this._config.slide.height}px`})),this._config.settings.infinite){const t=this._slides.items[0].className;this._slides.before.className=`${this._baseClasses.slide} ${t} clone-last`,this._slides.after.className=`${this._baseClasses.slide} ${t} clone-first`,this._slides.before.style.width=`${this._config.slide.width}px`,this._slides.after.style.width=`${this._config.slide.width}px`,this._slides.before.style.height=`${this._config.slide.height}px`,this._slides.after.style.height=`${this._config.slide.height}px`}}_setupControls(){if(this._config.controls.buttons.isSet&&this._config.controls.buttons.toggle){const{toggle:t}=this._config.controls.buttons;t.dataset.status=this._config.settings.state.status}if(this._config.controls.dots.isSet){const{container:t,dotClass:s}=this._config.controls.dots,e=[];t.classList.add(this._baseClasses.controls.dots.container);for(let t=0;t<this._config.slide.count;t++){const i=document.createElement("span");i.className=`${this._baseClasses.controls.dots.dot} ${s}`,i.dataset.point=`${t}`,e.push(i)}e[this._config.slide.activeIndex].classList.add("active"),this._dots=e,t.append(...e)}}_setupHandlers(){if(this._config.controls.buttons.isSet){const{prev:t,next:s,toggle:e}=this._config.controls.buttons;t.addEventListener("click",this.prev.bind(this)),s.addEventListener("click",this.next.bind(this)),e&&e.addEventListener("click",this.toggle.bind(this))}this._config.controls.dots.isSet&&this._config.controls.dots.container.addEventListener("click",(t=>{t.stopPropagation();const s=t.target.closest("[data-point]");if(s){const t={type:s.dataset.action="scroll",index:+s.dataset.point};this._slide.bind(this,t)()}})),this._config.settings.draggable.isSet&&this._container.addEventListener("mousedown",(t=>{t.preventDefault(),t.stopPropagation(),this._container.classList.add("being-dragged"),this._config.settings.draggable.startDragPosition=t.pageX;const s=this._dragSlide.bind(this);this._container.addEventListener("mousemove",s),this._container.onmouseup=()=>{document.removeEventListener("mousemove",s),this._container.classList.remove("being-dragged"),this._config.settings.draggable.startDragPosition=0,this._container.onmouseup=null}}))}_dragSlide({pageX:t}){const s=t-this._config.settings.draggable.startDragPosition;Math.abs(s)>=this._config.settings.draggable.dragRequiredOffset&&this._slide.bind(this,{type:s<0?"prev":"next"})()}_toggle(t=!0){const s=t?"add":"remove";this._slides.items[this._config.slide.activeIndex].classList[s]("active"),this._config.controls.dots.isSet&&this._dots[this._config.slide.activeIndex].classList[s]("active")}_able({type:t,index:s,autoplay:e=!1}){if(e&&"paused"===this._config.settings.state.status)return!1;if(!this._config.settings.state.cooldown){if("prev"===t)return this._config.slide.activeIndex-1>=0&&!this._config.settings.infinite||this._config.settings.infinite;if("next"===t)return this._config.slide.activeIndex+1<=this._config.slide.lastIndex&&!this._config.settings.infinite||this._config.settings.infinite;if("scroll"===t)return s!==this._config.slide.activeIndex}return!1}_autoplay(){const t=this;this._config.settings.autoplay.timerId=setTimeout((function s(){t._slide.bind(t,{type:"next",autoplay:!0})(),t._config.settings.autoplay.timerId=setTimeout(s,t._config.offset.speed)}),t._config.offset.speed)}_togglePause(){const t="active"===this._config.settings.state.status?"paused":"active";this._config.settings.state.status=t,this._config.controls.buttons.toggle&&(this._config.controls.buttons.toggle.dataset.status=t)}_loopSlider(t){const s={clonePosition:"prev"===t?this._config.offset.left+=this._config.offset.width:this._config.offset.left-=this._config.offset.width,hiddenOffset:"prev"===t?this._config.offset.max:-this._config.offset.width,newActiveIndex:"prev"===t?this._config.slide.lastIndex:0};this._container.style.left=`${s.clonePosition}px`,setTimeout((()=>{this._container.style.transition="none",this._config.offset.left=s.hiddenOffset,this._container.style.left=`${this._config.offset.left}px`,this._config.slide.activeIndex=s.newActiveIndex,this._toggle(),setTimeout((()=>{this._container.style.transition=this._config.settings.transition,this._config.settings.state.cooldown=!1}),this._config.offset.speed/100)}),this._config.offset.speed)}_slide({type:t,index:s,autoplay:e=!1}){if(this._able({type:t,index:s,autoplay:e})){if(this._config.settings.state.cooldown=!0,this._toggle(!1),"prev"===t){if(this._config.slide.activeIndex-1<0)return void this._loopSlider(t);this._config.offset.left+=this._config.offset.width,this._config.slide.activeIndex--}if("next"===t){if(this._config.slide.activeIndex+1>this._config.slide.lastIndex)return void this._loopSlider(t);this._config.offset.left-=this._config.offset.width,this._config.slide.activeIndex++}"scroll"===t&&(this._config.offset.left=-this._config.offset.width*(this._config.settings.infinite?s+1:s),this._config.slide.activeIndex=s),this._container.style.left=`${this._config.offset.left}px`,this._toggle(),setTimeout((()=>this._config.settings.state.cooldown=!1),this._config.offset.speed)}}prev(){window.event.stopPropagation(),this._slide({type:"prev"})}next(){window.event.stopPropagation(),this._slide({type:"next"})}toggle(){window.event.stopPropagation(),this._togglePause(),this._config.settings.autoplay.isSet=!0,this._config.settings.state.cooldown=!1,this._autoplay()}}function e({tagName:t="div",classes:s="",css:e=null,content:i=null}){const o=document.createElement(t);if(s.length&&(o.className=Array.isArray(s)?s.filter((t=>"string"==typeof t)).join(" "):s),e)for(const[t,s]of Object.entries(e)){let e=t;t.includes("-")&&(e=t.split("-").map(((t,s)=>0===s?t.toLocaleLowerCase():t[0].toUpperCase()+t.slice(1))).join("")),o.style[e]=s}if(i){const{position:t="afterbegin",data:s}=i;o["string"==typeof s?"insertAdjacentHTML":"insertAdjacentElement"](t,s)}return o}function i(t,s){if(s){if("string"==typeof s){const e=s.trim();if(e.includes(" ")){const s=e.split(" ");for(const e of s)t.classList.contains(e)?t.classList.remove(e):t.classList.add(e);return}t.classList.contains(e)?t.classList.remove(e):t.classList.add(e)}if("object"==typeof s){const{name:e,on:i,off:o}=s;t.hasAttribute(e)&&(t.getAttribute(e)===i?t.setAttribute(e,o):t.setAttribute(e,i))}}else t.hidden=!t.hidden}function o(t,s,e){const i=new ymaps.Map("brandmedia-contact-map",{center:[t,s],zoom:e});i.controls.remove("geolocationControl"),i.controls.remove("searchControl"),i.controls.remove("trafficControl"),i.controls.remove("typeSelector"),i.controls.remove("fullscreenControl"),i.controls.remove("zoomControl"),i.controls.remove("rulerControl"),i.behaviors.disable(["scrollZoom"])}document.addEventListener("DOMContentLoaded",(()=>{document.body.hasAttribute("data-map")&&ymaps.ready(o.bind(null,37.83425076906181,-85.76824150000002,7)),document.documentElement.addEventListener("click",(({target:t})=>{"image-popup"!==t.dataset.action?(t.closest(".slider__screen-wrapper")&&i(document.getElementById("presentation-slider-nav"),"active"),document.documentElement.clientWidth<=770&&function(){const t=window.event.target.closest("[data-action]"),s=document.getElementById("header-menu"),e=Array.from(s.children[0].children),o=e.findIndex((t=>t.classList.contains("active")));if(t){const n=t.dataset.action;if("main"===n)return i(s,"active"),void(-1!==o&&e[o].classList.remove("active"));if("submenu"===n){window.event.preventDefault();const s=e.findIndex((s=>s===t.parentElement.parentElement));return-1!==o&&e[o].classList.remove("active"),void(s!==o&&i(e[s],"active"))}}s.classList.remove("active"),-1!==o&&e[o].classList.remove("active")}()):function(t){const s=t.parentElement.querySelector("img"),i=s.src,o=s.dataset.description||"Описание картинки (надо заполнить)",n=window.innerWidth-document.documentElement.clientWidth,a=e({classes:"popup-overlay",css:{"padding-top":1,width:`${document.documentElement.clientWidth+n}px`,top:`${document.documentElement.scrollTop}px`}}),c=e({tagName:"div",classes:"popup-overlay__content",content:{data:`<img class="popup-overlay__image" src="${i}"><div class="popup-overlay__text">${o}</div>`}}),d=e({tagName:"span",classes:"popup-overlay__close-button"});a.append(c),c.append(d),document.body.prepend(a),document.body.style.overflow="hidden",document.body.style.paddingRight=`${n}px`,d.addEventListener("click",(function t(){d.removeEventListener("click",t),a.remove(),document.body.style.overflow="",document.body.style.paddingRight="0"}))}(t)})),new t({root:document.getElementById("recent-activity")}),new t({root:document.getElementById("portfolio-tabs"),startActive:3,equalify:!1}),new t({root:document.getElementById("about-tabs")}),new s({root:document.getElementById("presentation-slider"),speed:1.5,autoplay:!0,draggable:!1,controls:{buttons:{prev:document.getElementById("presentation-slider-prev"),next:document.getElementById("presentation-slider-next"),toggle:document.getElementById("presentation-slider-toggle")},dots:{container:document.getElementById("presentation-slider-dots"),dotClass:"slider__dot"}}}),new s({root:document.getElementById("portfolio-slider"),controls:{dots:{container:document.getElementById("portfolio-slider-dots"),dotClass:"slider__dot"}}})}))})();