(()=>{"use strict";class t{constructor({root:t,startActive:e=0,equalify:s=!0,hideType:i="display"}){t&&(this._root=t,this._configure(e,s,i),this.init())}_prefixClass="thea-tabs";_baseClasses={root:this._prefixClass,header:`${this._prefixClass}__header`,body:`${this._prefixClass}__body`,button:`${this._prefixClass}__button`,content:`${this._prefixClass}__content`,hideType:{display:["thea-tabs_display-base","thea-tabs_display-show"],visually:["thea-tabs_visually-base","thea-tabs_visually-show"]}};init(){this._setupBase(),this._setupHandlers()}_configure(t,e,s){this._config={},e&&(this._config.tabContent={maxHeight:Math.max(...Array.from(this._root.children[1].children).map((t=>t.offsetHeight)))}),this._config.params={equalify:e,activeTabIndex:t,hideType:{hiddenClass:"display"===s?this._baseClasses.hideType.display[0]:this._baseClasses.hideType.visually[0],activeClass:"display"===s?this._baseClasses.hideType.display[1]:this._baseClasses.hideType.visually[1]}}}_setupHandlers(){this._root.addEventListener("click",(t=>{const e=t.target.closest("[data-point]");if(e){const t=+e.dataset.point;t!==this._config.params.activeTabIndex&&this._toggleActive(t)}}))}_setupBase(){this._buttons=Array.from(this._root.children[0].children),this._contents=Array.from(this._root.children[1].children),this._root.classList.add(this._baseClasses.root),this._root.children[0].classList.add(this._baseClasses.header),this._root.children[1].classList.add(this._baseClasses.body),this._buttons.length===this._contents.length&&this._buttons.forEach(((t,e)=>{t.classList.add(this._baseClasses.button),t.dataset.point=`${e}`,this._contents[e].classList.add(this._baseClasses.content),this._contents[e].classList.add(this._config.params.hideType.hiddenClass)})),this._buttons[this._config.params.activeTabIndex].classList.add("active"),this._contents[this._config.params.activeTabIndex].classList.add("active"),this._contents[this._config.params.activeTabIndex].classList.add(this._config.params.hideType.activeClass),this._config.params.equalify&&this._equalifyHeights()}_toggleActive(t){this._buttons[this._config.params.activeTabIndex].classList.remove("active"),this._contents[this._config.params.activeTabIndex].classList.remove("active"),this._contents[this._config.params.activeTabIndex].classList.remove(this._config.params.hideType.activeClass),this._buttons[t].classList.add("active"),this._contents[t].classList.add("active"),this._contents[t].classList.add(this._config.params.hideType.activeClass),this._config.params.activeTabIndex=t}_equalifyHeights(){this._contents.forEach((t=>t.style.height=`${this._config.tabContent.maxHeight}px`))}}class e{constructor({root:t,controls:s,activeCount:i=1,transitionDuration:o=1.5,timeoutSpeed:n=3500,infinite:a=!0,autoplay:c=!0,draggable:r=!1,reversed:d=!1}){try{e.checkConstructorParams({root:t,controls:s,activeCount:i,transitionDuration:o,timeoutSpeed:n,infinite:a,autoplay:c,draggable:r,reversed:d})}catch(t){return void console.error(`${t.name}: ${t.message}`)}return this._root=t,this._configure(s,i,o,n,a,c,r,d),this._init(),new Proxy(this,{set:(t,e,s)=>Object.keys(t).includes(e)&&e.startsWith("_")?(console.error(`${e} является приватным. Ему нельзя устанавливать новые свойства, его можно только прочесть.`),!1):e.startsWith("_")?(console.error('Новые свойства нельзя называть, начиная с символа "_".'),!1):(t[e]=s,!1),deleteProperty:(t,e)=>e.startsWith("_")?(console.error(`${e} является приватным. Его нельзя удалить, его можно только прочесть.`),!1):(delete t[e],!1)})}_configure(t,e,s,i,o,n,a,c){const r=1===e?this._root.offsetWidth:Math.round(this._root.offsetWidth/e),d=this._root.children.length;if(this._config={controls:{buttons:{isSet:"buttons"in t},dots:{isSet:"dots"in t}},settings:{autoplay:n,reversed:c,infinite:o,timeoutSpeed:i,resetSpeed:300,dragParams:{isSet:a},transition:{enabled:!1,transitionDuration:s}},state:{status:n?"active":"paused",timeoutId:null,isDragging:!1,cooldown:!1,actionType:null,activeIndex:{slide:[0],dot:{prev:0,next:0}}},slide:{count:d,lastSlideIndex:d-1,width:r,activeCount:e,collection:{before:[],after:[],base:Array.from(this._root.children)}},offset:{width:this._root.offsetWidth,min:o?this._root.offsetWidth:0,max:r*(o?d:d-e-1),position:o?-this._root.offsetWidth:0,absolute:o?Math.abs(-this._root.offsetWidth):0}},this._config.settings.infinite&&(this._config.slide.collection.before.push(...this._config.slide.collection.base.slice(this._config.slide.count-e).map((t=>t.cloneNode(!0)))),this._config.slide.collection.after.push(...this._config.slide.collection.base.slice(0,e).map((t=>t.cloneNode(!0))))),this._config.slide.activeCount>1){let t=this._config.state.activeIndex.slide[0],s=e;for(;1!==s;)t+=1,this._config.state.activeIndex.slide.push(t),s-=1}this._config.controls.buttons.isSet&&(this._config.controls.buttons.next=t.buttons.next,this._config.controls.buttons.prev=t.buttons.prev,"toggle"in t.buttons&&(this._config.controls.buttons.toggle=t.buttons.toggle)),this._config.controls.dots.isSet&&(this._config.controls.dots.container=t.dots.container,this._config.controls.dots.count=this._config.slide.count/e,this._config.controls.dots.dotClass=t.dots.dotClass,this._config.state.activeIndex.dot={prev:0,next:0}),this._config.settings.dragParams.isSet&&(this._config.settings.dragParams.startPosition=0,this._config.settings.dragParams.differenceForDrag=15)}_init(){this._addBaseHTML(),this._addBaseCSS(),this._addHandlers(),this._config.settings.autoplay&&this._autoplay()}_addBaseHTML(){if(this._root.setAttribute("data-thea-slider-status",this._config.state.status),this._container=document.createElement("div"),this._container.append(...this._config.slide.collection.before,...this._config.slide.collection.base,...this._config.slide.collection.after),this._root.append(this._container),this._config.controls.dots.isSet){for(let t=0;t<this._config.controls.dots.count;t++){const e=document.createElement("div");e.setAttribute("data-thea-slider-point",t),e.setAttribute("data-thea-slider-action","scroll"),this._config.controls.dots.container.append(e)}this._config.controls.dots.collection=Array.from(this._config.controls.dots.container.children)}this._config.controls.buttons.isSet&&(this._config.controls.buttons.next.setAttribute("data-thea-slider-action","next"),this._config.controls.buttons.prev.setAttribute("data-thea-slider-action","prev"),"toggle"in this._config.controls.buttons&&(this._config.controls.buttons.toggle.setAttribute("data-thea-slider-status",this._config.state.status),this._config.controls.buttons.toggle.setAttribute("data-thea-slider-action","toggle")))}_addBaseCSS(){this._root.classList.add(e.baseClasses.root),this._container.className=e.baseClasses.container.base;for(const[t,s]of Object.entries(this._config.slide.collection))s.forEach((s=>{"base"!==t&&s.classList.add(e.baseClasses.slide.base),s.classList.add(e.baseClasses.slide[t]),s.style.width=`${this._config.slide.width}px`}));for(const t of this._config.state.activeIndex.slide)this._config.slide.collection.base[t].classList.add("active");if(this._config.controls.dots.isSet){for(const t of this._config.controls.dots.collection)if(t.className=e.baseClasses.control.dot,this._config.controls.dots.dotClass&&("string"==typeof this._config.controls.dots.dotClass&&t.classList.add(this._config.controls.dots.dotClass),Array.isArray(this._config.controls.dots.dotClass)))for(const e of this._config.controls.dots.dotClass)t.classList.add(e);this._config.controls.dots.container.classList.add(e.baseClasses.control.dots),this._config.controls.dots.collection[0].classList.add("active")}this._container.style.left=`${this._config.offset.position}px`,this._toggleTransition()}_addHandlers(){this._container.addEventListener("transitionend",this._handleTransitionend.bind(this)),document.addEventListener("click",(t=>{const e=t.target.closest("[data-thea-slider-action]");if(e){t.stopPropagation();const s=e.getAttribute("data-thea-slider-action");if("scroll"===s){const t=+e.getAttribute("data-thea-slider-point");this._slide.call(this,{type:s,index:t})}else"toggle"===s?this._toggleSliderState.call(this):this._slide.call(this,{type:s})}})),this._config.settings.dragParams.isSet&&(this._container.addEventListener("mousedown",this._dragStart.bind(this)),this._container.addEventListener("mousemove",this._dragProcess.bind(this)),this._container.addEventListener("mouseleave",this._dragStop.bind(this)),this._container.addEventListener("mouseup",this._dragStop.bind(this)))}_autoplay(){if("paused"!==this._config.state.status){const t=this,e=t._config.settings.reversed?"prev":"next";t._config.state.timeoutId=setTimeout((function s(){t._slide({type:e}),t._config.state.timeoutId=setTimeout(s,t._config.settings.timeoutSpeed)}),1e3)}}_able({type:t,index:e}){if(!this._config.state.cooldown){if("prev"===t)return this._config.settings.infinite||this._config.offset.absolute>this._config.offset.min;if("next"===t)return this._config.settings.infinite||this._config.offset.absolute<this._config.offset.max;if("scroll"===t)return null!==e&&e*this._config.slide.activeCount!==this._config.state.activeIndex.slide[0]}return!1}_slide({type:t,index:e=null}){this._able({type:t,index:e})&&(this._config.state.cooldown=!0,this._config.state.actionType=t,"prev"===t&&(this._config.offset.position+=this._config.offset.width),"next"===t&&(this._config.offset.position-=this._config.offset.width),"scroll"===t&&(this._config.offset.position=-this._config.offset.min+-this._config.offset.width*e,this._config.state.activeIndex.dot={prev:this._config.state.activeIndex.dot.next,next:e}),this._config.offset.absolute=Math.abs(this._config.offset.position),this._container.style.left=`${this._config.offset.position}px`)}_dragStart(t){t.stopPropagation(),t.preventDefault(),this._container.classList.add(e.baseClasses.container.dragged),this._config.settings.dragParams.startPosition=t.pageX,this._config.state.isDragging=!0}_dragProcess({pageX:t}){if(this._config.state.isDragging){const e=t-this._config.settings.dragParams.startPosition,s=e<0?"prev":"next";Math.abs(e)>=this._config.settings.dragParams.differenceForDrag&&this._slide.call(this,{type:s})}}_dragStop(){return this._container.classList.remove(e.baseClasses.container.dragged),this._config.state.isDragging=!1,this._config.settings.dragParams.startPosition=0,!1}_handleTransitionend(){this._config.settings.infinite&&(this._config.offset.absolute>this._config.offset.max&&(this._config.offset.position=-this._config.offset.min,this._config.state.actionType="reset-start"),this._config.offset.absolute<this._config.offset.min&&(this._config.offset.position=-this._config.offset.max,this._config.state.actionType="reset-end"),this._container.style.left=`${this._config.offset.position}px`,"reset-start"!==this._config.state.actionType&&"reset-end"!==this._config.state.actionType||this._toggleTransition()),this._toggleActive(),setTimeout((()=>{!this._config.settings.infinite||"reset-start"!==this._config.state.actionType&&"reset-end"!==this._config.state.actionType||this._toggleTransition(),this._config.state.cooldown=!1}),this._config.settings.resetSpeed)}_toggleSliderState(){this._config.state.status="paused"===this._config.state.status?"active":"paused",this._root.setAttribute("data-thea-slider-status",this._config.state.status),this._config.controls.buttons.toggle&&this._config.controls.buttons.toggle.setAttribute("data-thea-slider-status",this._config.state.status),"paused"===this._config.state.status?clearTimeout(this._config.state.timeoutId):this._autoplay()}_toggleActive(){this._toggleActiveSlide(),this._config.controls.dots.isSet&&this._toggleActiveDot()}_toggleActiveSlide(){const t=[...this._config.state.activeIndex.slide],e=[];if("next"===this._config.state.actionType)for(const t of Object.values(this._config.state.activeIndex.slide))e.push(t+this._config.slide.activeCount);if("prev"===this._config.state.actionType)for(const t of Object.values(this._config.state.activeIndex.slide))e.push(t-this._config.slide.activeCount);if("scroll"===this._config.state.actionType)for(;e.length<this._config.slide.activeCount;)e.push(this._config.state.activeIndex.dot.next*this._config.slide.activeCount),(this._config.state.activeIndex.dot.next>this._config.state.activeIndex.dot.prev||0===this._config.state.activeIndex.dot.next)&&e.push(e[e.length-1]+1),this._config.state.activeIndex.dot.next<this._config.state.activeIndex.dot.prev&&(e.push(this._config.state.activeIndex.dot.next*this._config.slide.activeCount+1),e.push(e[e.length-1]-1));if("reset-start"===this._config.state.actionType)for(e.push(0);e.length<this._config.slide.activeCount;)e.push(e[e.length-1]+1);if("reset-end"===this._config.state.actionType)for(e.push(this._config.slide.lastSlideIndex);e.length<this._config.slide.activeCount;)e.push(e[e.length-1]-1);e.length=this._config.slide.activeCount,this._config.state.activeIndex.slide=[...e];for(const[e,s]of Object.entries(this._config.state.activeIndex.slide))this._config.slide.collection.base[t[e]].classList.remove("active"),this._config.slide.collection.base[s].classList.add("active")}_toggleActiveDot(){"next"===this._config.state.actionType&&(this._config.state.activeIndex.dot={prev:this._config.state.activeIndex.dot.next,next:this._config.state.activeIndex.dot.next+1}),"prev"===this._config.state.actionType&&(this._config.state.activeIndex.dot={prev:this._config.state.activeIndex.dot.next,next:this._config.state.activeIndex.dot.next-1}),"reset-start"===this._config.state.actionType&&(this._config.state.activeIndex.dot={prev:this._config.controls.dots.count-1,next:0}),"reset-end"===this._config.state.actionType&&(this._config.state.activeIndex.dot={prev:0,next:this._config.controls.dots.count-1}),this._config.controls.dots.collection[this._config.state.activeIndex.dot.prev].classList.remove("active"),this._config.controls.dots.collection[this._config.state.activeIndex.dot.next].classList.add("active")}_toggleTransition(){this._container.style.transition=this._config.settings.transition.enabled?null:`left ${this._config.settings.transition.transitionDuration}s ease 0s`,this._config.settings.transition.enabled=!this._config.settings.transition.enabled}static checkConstructorParams(...t){const{root:e,controls:s,activeCount:i,transitionDuration:o,timeoutSpeed:n,infinite:a,autoplay:c,draggable:r,reversed:d}=t[0];if(!e)throw new Error("root (корневой элемент) не определен.");if(!(e instanceof HTMLElement))throw new TypeError("root должен быть html элементом.");if(!e.children.length)throw new Error("root не содержит потомков (слайдов).");if(!s)throw new Error("controls (элементы управления) не определен.");if("object"!=typeof s)throw new TypeError("controls должен быть объектом.");{const t=s.buttons,e=s.dots;if(!t&&!e)throw new Error("controls должен содержать хотя бы одно из свойств: buttons или dots.");if(e){if("object"!=typeof e)throw new TypeError("controls.dots должен быть объектом.");if(!Object.keys(e).includes("container"))throw new Error("controls.dots должен содержать container.");if(!(e.container instanceof HTMLElement))throw new TypeError("dots.container должен быть html элементом.");if(e.dotClass){if("string"!=typeof e.dotClass&&!Array.isArray(e.dotClass))throw new TypeError("dots.dotClass должен быть строкой или массивом.");if(e.dotClass.includes(" "))throw new Error("dots.dotClass не должен содержать пробелы.")}}if(t){if("object"!=typeof t)throw new TypeError("controls.buttons должен быть объектом.");if(!Object.keys(t).includes("next")||!Object.keys(t).includes("prev"))throw new Error("controls.buttons должен содержать оба свойства: next и prev.");for(const[e,s]of Object.entries(t))if(!(s instanceof HTMLElement))throw new TypeError(`${e} должен быть html элементом.`)}}if(isNaN(i)||"string"==typeof i||!isFinite(i))throw TypeError("activeCount должен быть числом.");if(e.children.length%i!=0)throw Error("Общее количество слайдов должно быть кратно activeCount (делиться на него без остатка).");if(i<=0)throw Error("activeCount не может быть меньше или равным 0.");if(isNaN(o)||"string"==typeof o||!isFinite(o))throw TypeError("transitionDuration должен быть числом.");if(isNaN(n)||"string"==typeof n||!isFinite(n))throw TypeError("timeoutSpeed должен быть числом.");if("boolean"!=typeof a)throw TypeError("infinite должен быть булевым значением.");if("boolean"!=typeof c)throw TypeError("autoplay должен быть булевым значением.");if("boolean"!=typeof r)throw TypeError("draggable должен быть булевым значением.");if("boolean"!=typeof d)throw TypeError("reversed должен быть булевым значением.")}static baseClasses={root:"thea-slider",container:{base:"thea-slider__container",dragged:"being-dragged"},slide:{before:"thea-slider__before-clone",after:"thea-slider__after-clone",base:"thea-slider__slide"},control:{dots:"thea-slider__dots-container",dot:"thea-slider__dot"}}}function s({tagName:t="div",classes:e="",css:s=null,content:i=null}){const o=document.createElement(t);if(e.length&&(o.className=Array.isArray(e)?e.filter((t=>"string"==typeof t)).join(" "):e),s)for(const[t,e]of Object.entries(s)){let s=t;t.includes("-")&&(s=t.split("-").map(((t,e)=>0===e?t.toLocaleLowerCase():t[0].toUpperCase()+t.slice(1))).join("")),o.style[s]=e}if(i){const{position:t="afterbegin",data:e}=i;o["string"==typeof e?"insertAdjacentHTML":"insertAdjacentElement"](t,e)}return o}function i(t,e){if(e){if("string"==typeof e){const s=e.trim();if(s.includes(" ")){const e=s.split(" ");for(const s of e)t.classList.contains(s)?t.classList.remove(s):t.classList.add(s);return}t.classList.contains(s)?t.classList.remove(s):t.classList.add(s)}if("object"==typeof e){const{name:s,on:i,off:o}=e;t.hasAttribute(s)&&(t.getAttribute(s)===i?t.setAttribute(s,o):t.setAttribute(s,i))}}else t.hidden=!t.hidden}function o(t,e,s){const i=new ymaps.Map("brandmedia-contact-map",{center:[t,e],zoom:s});i.controls.remove("geolocationControl"),i.controls.remove("searchControl"),i.controls.remove("trafficControl"),i.controls.remove("typeSelector"),i.controls.remove("fullscreenControl"),i.controls.remove("zoomControl"),i.controls.remove("rulerControl"),i.behaviors.disable(["scrollZoom"])}document.addEventListener("DOMContentLoaded",(()=>{document.body.hasAttribute("data-map")&&ymaps.ready(o.bind(null,37.83425076906181,-85.76824150000002,7)),document.documentElement.addEventListener("click",(({target:t})=>{"image-popup"!==t.dataset.action?(t.closest("#presentation-slider")&&i(document.getElementById("presentation-slider-nav"),"active"),document.documentElement.clientWidth<=770&&function(){const t=window.event.target.closest("[data-action]"),e=document.getElementById("header-menu"),s=Array.from(e.children[0].children),o=s.findIndex((t=>t.classList.contains("active")));if(t){const n=t.dataset.action;if("main"===n)return i(e,"active"),void(-1!==o&&s[o].classList.remove("active"));if("submenu"===n){window.event.preventDefault();const e=s.findIndex((e=>e===t.parentElement.parentElement));return-1!==o&&s[o].classList.remove("active"),void(e!==o&&i(s[e],"active"))}}e.classList.remove("active"),-1!==o&&s[o].classList.remove("active")}()):function(t){const e=t.parentElement.querySelector("img"),i=e.src,o=e.dataset.description||"Описание картинки (надо заполнить)",n=window.innerWidth-document.documentElement.clientWidth,a=s({classes:"popup-overlay",css:{"padding-top":1,width:`${document.documentElement.clientWidth+n}px`,top:`${document.documentElement.scrollTop}px`}}),c=s({tagName:"div",classes:"popup-overlay__content",content:{data:`<img class="popup-overlay__image" src="${i}"><div class="popup-overlay__text">${o}</div>`}}),r=s({tagName:"span",classes:"popup-overlay__close-button"});a.append(c),c.append(r),document.body.prepend(a),document.body.style.overflow="hidden",document.body.style.paddingRight=`${n}px`,r.addEventListener("click",(function t(){r.removeEventListener("click",t),a.remove(),document.body.style.overflow="",document.body.style.paddingRight="0"}))}(t)})),new t({root:document.getElementById("recent-activity")}),new t({root:document.getElementById("portfolio-tabs"),startActive:3,equalify:!1,hideType:"visually"}),new t({root:document.getElementById("about-tabs")}),new e({root:document.getElementById("presentation-slider"),controls:{buttons:{prev:document.getElementById("presentation-slider-prev"),next:document.getElementById("presentation-slider-next"),toggle:document.getElementById("presentation-slider-toggle")},dots:{container:document.getElementById("presentation-slider-dots"),dotClass:"slider__dot"}}}),new e({root:document.getElementById("portfolio-slider"),controls:{dots:{container:document.getElementById("portfolio-slider-dots"),dotClass:"slider__dot"}},draggable:!0})}))})();