(()=>{"use strict";class t{constructor({root:t,startActive:s=0,equalify:e=!0,hideType:i="display"}){t&&(this._root=t,this._configure(s,e,i),this.init())}_prefixClass="thea-tabs";_baseClasses={root:this._prefixClass,header:`${this._prefixClass}__header`,body:`${this._prefixClass}__body`,button:`${this._prefixClass}__button`,content:`${this._prefixClass}__content`,hideType:{display:["thea-tabs_display-base","thea-tabs_display-show"],visually:["thea-tabs_visually-base","thea-tabs_visually-show"]}};init(){this._setupBase(),this._setupHandlers()}_configure(t,s,e){this._config={},s&&(this._config.tabContent={maxHeight:Math.max(...Array.from(this._root.children[1].children).map((t=>t.offsetHeight)))}),this._config.params={equalify:s,activeTabIndex:t,hideType:{hiddenClass:"display"===e?this._baseClasses.hideType.display[0]:this._baseClasses.hideType.visually[0],activeClass:"display"===e?this._baseClasses.hideType.display[1]:this._baseClasses.hideType.visually[1]}}}_setupHandlers(){this._root.addEventListener("click",(t=>{const s=t.target.closest("[data-point]");if(s){const t=+s.dataset.point;t!==this._config.params.activeTabIndex&&this._toggleActive(t)}}))}_setupBase(){this._buttons=Array.from(this._root.children[0].children),this._contents=Array.from(this._root.children[1].children),this._root.classList.add(this._baseClasses.root),this._root.children[0].classList.add(this._baseClasses.header),this._root.children[1].classList.add(this._baseClasses.body),this._buttons.length===this._contents.length&&this._buttons.forEach(((t,s)=>{t.classList.add(this._baseClasses.button),t.dataset.point=`${s}`,this._contents[s].classList.add(this._baseClasses.content),this._contents[s].classList.add(this._config.params.hideType.hiddenClass)})),this._buttons[this._config.params.activeTabIndex].classList.add("active"),this._contents[this._config.params.activeTabIndex].classList.add("active"),this._contents[this._config.params.activeTabIndex].classList.add(this._config.params.hideType.activeClass),this._config.params.equalify&&this._equalifyHeights()}_toggleActive(t){this._buttons[this._config.params.activeTabIndex].classList.remove("active"),this._contents[this._config.params.activeTabIndex].classList.remove("active"),this._contents[this._config.params.activeTabIndex].classList.remove(this._config.params.hideType.activeClass),this._buttons[t].classList.add("active"),this._contents[t].classList.add("active"),this._contents[t].classList.add(this._config.params.hideType.activeClass),this._config.params.activeTabIndex=t}_equalifyHeights(){this._contents.forEach((t=>t.style.height=`${this._config.tabContent.maxHeight}px`))}}class s{constructor({root:t,controls:s,startActive:e=0,speed:i=1,infinite:n=!0,autoplay:o=!0,draggable:a=!0,reversed:c=!1}){t&&t.children.length&&s&&(this._root=t,this._slides={items:Array.from(this._root.children)},this._configure(s,e,i,n,o,a,c),this.init())}_prefixClass="thea-slider";_baseClasses={root:this._prefixClass,container:`${this._prefixClass}__container`,slide:`${this._prefixClass}__slide`,controls:{dots:{container:`${this._prefixClass}__dots`,dot:`${this._prefixClass}__dot`}}};_configure(t,s,e,i,n,o,a){this._config={};const c=this._root.offsetWidth,l=this._root.offsetHeight,d=this._slides.items.length,r=1e3*e;this._config.slide={width:c,height:l,count:d,lastIndex:d-1,activeIndex:s},this._config.offset={left:-c*(i?s+1:s),width:c,min:-c*(i?s+1:s),max:-c*d,speed:r},this._config.settings={reversed:a,state:{status:n?"active":"paused",cooldown:!1,cooldownDelay:300},autoplay:{isSet:n,timerId:null},infinite:i,transition:`left ${e}s ease 0s`,draggable:{isSet:o,currently:!1,startDragPosition:0,dragRequiredOffset:5}},this._config.controls={buttons:{isSet:"buttons"in t},dots:{isSet:"dots"in t}},this._config.controls.buttons.isSet&&(this._config.controls.buttons.prev=t.buttons.prev,this._config.controls.buttons.next=t.buttons.next,this._config.controls.buttons.toggle=t.buttons.toggle),this._config.controls.dots.isSet&&(this._config.controls.dots.container=t.dots.container,this._config.controls.dots.dotClass=t.dots.dotClass)}init(){this._config.settings.infinite&&(this._slides.before=this._slides.items[this._slides.items.length-1].cloneNode(!0),this._slides.after=this._slides.items[0].cloneNode(!0)),this._container=document.createElement("div"),this._root.append(this._container),this._config.settings.infinite?this._container.append(this._slides.before,...this._slides.items,this._slides.after):this._container.append(...this._slides.items),this._container.style.left=`${this._config.offset.left}px`,this._slides.items[this._config.slide.activeIndex].classList.add("active"),this._setupBaseStyles(),this._setupControls(),this._setupHandlers(),this._config.settings.autoplay&&this._autoplay()}_setupBaseStyles(){if(this._root.classList.add(this._baseClasses.root),this._container.classList.add(this._baseClasses.container),this._container.style.transition=this._config.settings.transition,this._slides.items.forEach((t=>{t.classList.add(this._baseClasses.slide),t.style.width=`${this._config.slide.width}px`,t.style.height=`${this._config.slide.height}px`})),this._config.settings.infinite){const t=this._slides.items[0].className;this._slides.before.className=`${this._baseClasses.slide} ${t} clone-last`,this._slides.after.className=`${this._baseClasses.slide} ${t} clone-first`,this._slides.before.style.width=`${this._config.slide.width}px`,this._slides.after.style.width=`${this._config.slide.width}px`,this._slides.before.style.height=`${this._config.slide.height}px`,this._slides.after.style.height=`${this._config.slide.height}px`}}_setupControls(){if(this._config.controls.buttons.isSet&&this._config.controls.buttons.toggle){const{toggle:t}=this._config.controls.buttons;t.dataset.status=this._config.settings.state.status}if(this._config.controls.dots.isSet){const{container:t,dotClass:s}=this._config.controls.dots,e=[];t.classList.add(this._baseClasses.controls.dots.container);for(let t=0;t<this._config.slide.count;t++){const i=document.createElement("span");i.className=`${this._baseClasses.controls.dots.dot} ${s}`,i.dataset.point=`${t}`,e.push(i)}e[this._config.slide.activeIndex].classList.add("active"),this._dots=e,t.append(...e)}}_setupHandlers(){if(this._config.controls.buttons.isSet){const{prev:t,next:s,toggle:e}=this._config.controls.buttons;t.addEventListener("click",this.prev.bind(this)),s.addEventListener("click",this.next.bind(this)),e&&e.addEventListener("click",this.toggle.bind(this))}this._config.controls.dots.isSet&&this._config.controls.dots.container.addEventListener("click",(t=>{t.stopPropagation();const s=t.target.closest("[data-point]");if(s){const t={type:s.dataset.action="scroll",index:+s.dataset.point};this._slide.call(this,t)}})),this._config.settings.draggable.isSet&&(this._container.addEventListener("mousedown",this._handleMouseDown.bind(this)),this._container.addEventListener("mousemove",this._handleMouseDrag.bind(this)),this._container.addEventListener("mouseup",this._stopDrag.bind(this)),this._container.addEventListener("mouseleave",this._stopDrag.bind(this)))}_handleMouseDrag({pageX:t}){if(this._config.settings.draggable.currently){const s=t-this._config.settings.draggable.startDragPosition;Math.abs(s)>=this._config.settings.draggable.dragRequiredOffset&&this._slide.call(this,{type:s<0?"prev":"next"})}}_handleMouseDown(t){t.stopPropagation(),t.preventDefault(),this._container.classList.add("being-dragged"),this._config.settings.draggable.startDragPosition=t.pageX,this._config.settings.draggable.currently=!0}_stopDrag(t){return this._container.classList.remove("being-dragged"),this._container.removeEventListener("mousemove",this._handleMouseUp),this._config.settings.draggable.currently=!1,this._config.settings.draggable.startDragPosition=0,!1}_toggleActiveSlide(t=!0){const s=t?"add":"remove";this._slides.items[this._config.slide.activeIndex].classList[s]("active"),this._config.controls.dots.isSet&&this._dots[this._config.slide.activeIndex].classList[s]("active")}_autoplay(){const t=this;t._config.settings.autoplay.timerId=setInterval((()=>{"paused"!==t._config.settings.state.status&&t._slide.call(t,{type:t._config.settings.reversed?"prev":"next"})}),t._config.offset.speed)}_togglePause(){const t="active"===this._config.settings.state.status?"paused":"active";this._config.settings.state.status=t,this._config.controls.buttons.toggle&&(this._config.controls.buttons.toggle.dataset.status=t)}_able({type:t,index:s=-1}){if(!this._config.settings.state.cooldown){if("prev"===t)return this._config.slide.activeIndex-1>0||this._config.settings.infinite;if("next"===t)return this._config.slide.activeIndex+1<this._config.slide.lastIndex||this._config.settings.infinite;if("scroll"===t)return s!==this._config.slide.activeIndex}return!1}_slide({type:t,index:s=-1}){this._able({type:t,index:s})&&(this._config.settings.state.cooldown=!0,this._toggleActiveSlide(!1),"next"===t&&(this._config.offset.left-=this._config.offset.width,this._config.slide.activeIndex++),"prev"===t&&(this._config.offset.left+=this._config.offset.width,this._config.slide.activeIndex--),"scroll"===t&&(this._config.offset.left=-this._config.offset.width*(this._config.settings.infinite?s+1:s),this._config.slide.activeIndex=s),this._container.style.left=`${this._config.offset.left}px`,this._container.ontransitionend=()=>{this._container.style.transition="left 0s ease 0s",this._config.slideByDot=!1,-1!==this._config.slide.activeIndex&&this._config.slide.activeIndex!==this._config.slide.count||(this._config.offset.left=-1===this._config.slide.activeIndex?this._config.offset.max:this._config.offset.min,this._config.slide.activeIndex=-1===this._config.slide.activeIndex?this._config.slide.lastIndex:0,this._container.style.left=`${this._config.offset.left}px`),this._toggleActiveSlide(),setTimeout((()=>{this._container.style.transition=this._config.settings.transition,this._config.settings.state.cooldown=!1,this._container.ontransitionend=null}),this._config.settings.state.cooldownDelay)})}prev(t){t.stopPropagation(),this._slide({type:"prev"})}next(t){t.stopPropagation(),this._slide({type:"next"})}toggle(t){t.stopPropagation(),this._togglePause(),this._autoplay()}}function e({tagName:t="div",classes:s="",css:e=null,content:i=null}){const n=document.createElement(t);if(s.length&&(n.className=Array.isArray(s)?s.filter((t=>"string"==typeof t)).join(" "):s),e)for(const[t,s]of Object.entries(e)){let e=t;t.includes("-")&&(e=t.split("-").map(((t,s)=>0===s?t.toLocaleLowerCase():t[0].toUpperCase()+t.slice(1))).join("")),n.style[e]=s}if(i){const{position:t="afterbegin",data:s}=i;n["string"==typeof s?"insertAdjacentHTML":"insertAdjacentElement"](t,s)}return n}function i(t,s){if(s){if("string"==typeof s){const e=s.trim();if(e.includes(" ")){const s=e.split(" ");for(const e of s)t.classList.contains(e)?t.classList.remove(e):t.classList.add(e);return}t.classList.contains(e)?t.classList.remove(e):t.classList.add(e)}if("object"==typeof s){const{name:e,on:i,off:n}=s;t.hasAttribute(e)&&(t.getAttribute(e)===i?t.setAttribute(e,n):t.setAttribute(e,i))}}else t.hidden=!t.hidden}function n(t,s,e){const i=new ymaps.Map("brandmedia-contact-map",{center:[t,s],zoom:e});i.controls.remove("geolocationControl"),i.controls.remove("searchControl"),i.controls.remove("trafficControl"),i.controls.remove("typeSelector"),i.controls.remove("fullscreenControl"),i.controls.remove("zoomControl"),i.controls.remove("rulerControl"),i.behaviors.disable(["scrollZoom"])}document.addEventListener("DOMContentLoaded",(()=>{document.body.hasAttribute("data-map")&&ymaps.ready(n.bind(null,37.83425076906181,-85.76824150000002,7)),document.documentElement.addEventListener("click",(({target:t})=>{"image-popup"!==t.dataset.action?(t.closest(".slider__screen-wrapper")&&i(document.getElementById("presentation-slider-nav"),"active"),document.documentElement.clientWidth<=770&&function(){const t=window.event.target.closest("[data-action]"),s=document.getElementById("header-menu"),e=Array.from(s.children[0].children),n=e.findIndex((t=>t.classList.contains("active")));if(t){const o=t.dataset.action;if("main"===o)return i(s,"active"),void(-1!==n&&e[n].classList.remove("active"));if("submenu"===o){window.event.preventDefault();const s=e.findIndex((s=>s===t.parentElement.parentElement));return-1!==n&&e[n].classList.remove("active"),void(s!==n&&i(e[s],"active"))}}s.classList.remove("active"),-1!==n&&e[n].classList.remove("active")}()):function(t){const s=t.parentElement.querySelector("img"),i=s.src,n=s.dataset.description||"Описание картинки (надо заполнить)",o=window.innerWidth-document.documentElement.clientWidth,a=e({classes:"popup-overlay",css:{"padding-top":1,width:`${document.documentElement.clientWidth+o}px`,top:`${document.documentElement.scrollTop}px`}}),c=e({tagName:"div",classes:"popup-overlay__content",content:{data:`<img class="popup-overlay__image" src="${i}"><div class="popup-overlay__text">${n}</div>`}}),l=e({tagName:"span",classes:"popup-overlay__close-button"});a.append(c),c.append(l),document.body.prepend(a),document.body.style.overflow="hidden",document.body.style.paddingRight=`${o}px`,l.addEventListener("click",(function t(){l.removeEventListener("click",t),a.remove(),document.body.style.overflow="",document.body.style.paddingRight="0"}))}(t)})),new t({root:document.getElementById("recent-activity")}),new t({root:document.getElementById("portfolio-tabs"),startActive:3,equalify:!1,hideType:"visually"}),new t({root:document.getElementById("about-tabs")}),new s({root:document.getElementById("presentation-slider"),speed:1.5,draggable:!1,controls:{buttons:{prev:document.getElementById("presentation-slider-prev"),next:document.getElementById("presentation-slider-next"),toggle:document.getElementById("presentation-slider-toggle")},dots:{container:document.getElementById("presentation-slider-dots"),dotClass:"slider__dot"}}}),new s({root:document.getElementById("portfolio-slider"),controls:{dots:{container:document.getElementById("portfolio-slider-dots"),dotClass:"slider__dot"}}})}))})();